"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FallbackProvider = void 0;
const ethers_1 = require("ethers");
const FallbackProvider = (config, headers) => {
    const configs = [];
    if (typeof config === 'string') {
        const urls = config.split(',');
        for (const [i, url] of urls.entries()) {
            const connectionInfo = { url };
            if (typeof headers === 'object') {
                connectionInfo.headers = headers;
            }
            configs.push({
                priority: i,
                provider: new ethers_1.ethers.providers.StaticJsonRpcProvider(connectionInfo),
            });
        }
        return new ethers_1.ethers.providers.FallbackProvider(configs);
    }
    return new ethers_1.ethers.providers.FallbackProvider(config);
};
exports.FallbackProvider = FallbackProvider;
//# sourceMappingURL=fallback-provider.js.map